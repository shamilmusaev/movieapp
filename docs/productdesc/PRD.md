# Product Requirement Document (PRD)

**Название проекта:** CineSwipe (рабочее название)  
**Платформа:** Web (Next.js / React / TypeScript), mobile first  
**Версия:** MVP 1.0

---

## 1. Видение продукта

Пользователь открывает сайт на смартфоне и сразу попадает в вертикальную ленту коротких видео по фильмам, сериалам и аниме: трейлеры, тизеры или заранее определенные яркие фрагменты. Он скроллит и переключает ролики жестами или кнопками, как в TikTok, и быстро понимает, интересен ему конкретный тайтл или нет. Понравившееся добавляет в избранное. Также можно открывать коллекции, тематические подборки, и скроллить внутри них отдельную ленту.

Приложение решает проблему: постеры и описания не помогают выбрать, а короткий видеоролик помогает. Пользователь всегда находит что-то новое и сохраняет интересные тайтлы на потом.

---

## 2. Цели продукта

### Главные цели MVP
1. Простой способ открывать новые фильмы через короткие видео в браузере.
2. Стабильная персональная лента, основанная на вкусе пользователя.
3. Возможность сохранять фильмы и коллекции в избранное.
4. Просмотр тематических коллекций.
5. Плавный видеоскроллинг без повторов и задержек.

### Долгосрочные цели
1. Генерация коллекций нейросетью.
2. Кастомные коллекции пользователей.
3. Продвинутая персонализация.
4. AI-generated клипы.
5. Монетизация через партнерские ссылки.

---

## 3. Основные пользовательские сценарии

### 3.1. Главная лента
- Вертикальная лента, адаптированная под мобильные устройства.
- Автоплей видимого ролика.
- Переключение жестами или кнопками.
- Добавление в избранное.
- Лайки.
- Поделиться.
- Переход в карточку фильма.
- Жанры под роликом.
- Алгоритм подстраивается под предпочтения пользователя.

### 3.2. Карточка фильма
- Постер, описание, жанры, год, рейтинг TMDB.
- Список похожих.
- Кнопка "Где смотреть".
- Добавление в избранное.

### 3.3. Коллекции
- Список редакционных коллекций.
- Внутри — вертикальная лента фильмов коллекции.
- Возможность сохранения коллекции.
- Возможность сохранять фильмы внутри коллекции.

### 3.4. Избранное
- Две вкладки: "Фильмы" и "Коллекции".
- Сортировка и фильтры.
- Локальное хранение.

### 3.5. Онбординг
- Выбор жанров.
- (Опционально) выбор любимых фильмов.
- Формирование стартовой ленты.

---

## 4. Персонажи

### 4.1. "Охотник за фильмами"
- Ищет новый контент каждый вечер.
- Любит короткие ролики.
- Использует избранное.

### 4.2. "Ленивый зритель"
- Хочет просто смотреть ленту.
- Важна легкость интерфейса.

### 4.3. "Коллекционер"
- Любит тематические подборки.
- Хранит коллекции.
- Хотел бы генерировать свои.

---

## 5. Функциональные требования

### 5.1. Лента видео
- Infinite scroll.
- Один активный видеоплеер.
- Автоплей только видимого ролика.
- Звук выключен по умолчанию.
- Предзагрузка следующего видео.
- Кнопки: избранное, лайк, поделиться, детали.
- Алгоритм уменьшает повторы.

### 5.2. Источник контента
- TMDB API:
  - trending, popular, top rated, upcoming
  - trailers
  - жанры, описания, рейтинги
  - похожие
  - watch providers
- Видео через YouTube (ключы из TMDB).

### 5.3. Коллекции
- Редакционные коллекции (JSON).
- Можно сохранить коллекцию.
- Лента внутри коллекции.

### 5.4. Избранное
- Локальное хранение (localStorage/IndexedDB).
- Фильмы и коллекции.
- Удаление, сортировка.

### 5.5. Карточка фильма
- Полная информация.
- Похожие фильмы.
- "Где смотреть".
- Лайк, избранное.

### 5.6. Онбординг
- Выбор жанров.
- Сохранение предпочтений.
- Фильтрация стартовой ленты.

---

## 6. Нефункциональные требования

### 6.1. Производительность
- Плавная анимация, стремиться к 60 FPS.
- Один активный видеоплеер.
- Предзагрузка контента.
- Оптимизация размера данных.
- Code splitting в Next.js.

### 6.2. UX-требования
- Четкое mobile first:
  - вертикальная ориентация,
  - элементы для управления пальцами,
  - видео на весь экран смартфона.
- Десктоп поддерживается, но мобильная версия приоритет.
- Мгновенные отклики UI.

### 6.3. Надежность
- Минимизация ошибок API.
- Fallback контента.
- Лента работает при слабом интернете (буферизация).

### 6.4. Масштабируемость
- Поддержка пользовательских коллекций, AI-рекомендаций.
- Возможность PWA.

---

## 7. Архитектура и технические детали

### 7.1. Технологии
- Next.js.
- TypeScript.
- HTML5 video.
- Tailwind CSS или другой mobile first CSS.
- localStorage / IndexedDB.
- TMDB API.
- Опционально backend (Node.js / Supabase / Firebase).

### 7.2. Локальные данные
- Жанры.
- Избранное.
- Просмотренные элементы.
- Поведенческие сигналы.
- Настройки пользователя.

### 7.3. Кеширование
- Кеширование фильмов (localStorage/IndexedDB).
- Кеширование на стороне Next.js (ISR/SSR).
- Предзагрузка событий для видео.

---

## 8. Рекомендательная система (MVP)

### Сигналы:
- Лайк и избранное — сильный плюс.
- Досмотр — плюс.
- Быстрое переключение — слабый минус.
- Жанры из онбординга.

### Логика:
- На старте — trending/popular по жанрам.
- Далее — больше фильмов, похожих на избранные.
- Уменьшение повторов.

---

## 9. Риски и ограничения

### 9.1. Авторские права
- Использование только официальных трейлеров TMDB/YouTube.

### 9.2. Задержки воспроизведения
- Необходима предзагрузка.

### 9.3. Простая модель рекомендаций
- Усложнение позже.

### 9.4. Возможная блокировка роликов YouTube
- Fallback:
  - постер,
  - открыт в YouTube.

---

## 10. KPI

1. Количество переключений видео.
2. Среднее время просмотра.
3. Добавления в избранное.
4. Открытия карточек.
5. Retention D1/D7.
6. Доля мобильного трафика.

---


НЕ ЧИТАЙ ТО ЧТО НИЖЕ, ИГНОРИРУЙ

## 11. План развития

1. AI-генерация коллекций.
2. Пользовательские коллекции.
3. Векторные рекомендации.
4. AI-клипы 10–20 секунд.
5. Статусы: смотрю / буду смотреть.
6. Профили пользователей.
7. PWA с offline режимом.

---

## Proposal 1: Initial Architecture Setup (Next.js)
- Создать проект Next.js + TypeScript.
- Настроить структуру папок.
- Подключить Tailwind (mobile first).
- Создать layout для ленты, карточки, коллекций.
- Подключить TMDB client. 

## Proposal 2: Basic Vertical Feed UI (Mock Data)
- Вертикальная лента.
- HTML5 video, автоплей, один активный.
- Моковые данные.
- UI: название, избранное, лайк.

## Proposal 3: Integrate TMDB API Into Feed
- Загрузка trending/popular.
- Получение trailer key.
- Заменить моковые данные реальными.

## Proposal 4: Favorites (Movies)
- Toggle избранного.
- Экран избранного.
- localStorage.

## Proposal 5: Movie Details Screen
- Постер, рейтинг, жанры, описание.
- Похожие.
- Где смотреть.

## Proposal 6: Editorial Collections (Static)
- Статический массив коллекций.
- Список коллекций.
- Лента внутри коллекции.

## Proposal 7: Favorites (Collections)
- Сохранение коллекций.
- Экран избранных коллекций.

## Proposal 8: Onboarding (Genres Selection)
- Выбор жанров.
- Сохранение предпочтений.
- Фильтрация стартовой ленты.

## Proposal 9: Feed Behavior Improvements
- Ограничение повторов.
- Сигналы — свайп/досмотр.
- Базовая персонализация.